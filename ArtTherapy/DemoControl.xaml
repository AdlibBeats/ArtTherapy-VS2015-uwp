<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:custom="using:ArtTherapy"
    xmlns:converters="using:ArtTherapyCore.ValueConverters"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls">
    
    <converters:VisibilityInverseConverter x:Key="visibilityInverseConverter"/>
    <converters:VisibilityConverter x:Key="visibilityConverter"/>

    <Style TargetType="custom:DemoControl">
        <Style.Setters>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="custom:DemoControl">
                        <Grid>
                            <Grid Margin="0" Background="{x:Null}" MaxWidth="200">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto" MaxHeight="158"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ProgressRing Height="50" Width="50" BorderBrush="Gray" Foreground="Black" Grid.RowSpan="5" HorizontalAlignment="Center" VerticalAlignment="Center"
                                    IsActive="{Binding IsLoading}" Background="{x:Null}"/>
                                <controls:ImageEx Grid.Row="0" Grid.RowSpan="2" Stretch="Uniform" Background="{x:Null}"
                                    Source="{Binding Text}" IsCacheEnabled="False"
                                    Visibility="{Binding Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}"/>
                                <Border Grid.Row="1" Background="Black" Opacity="0.7" MaxHeight="100"
                                    Visibility="{Binding Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}"/>
                                <TextBlock Grid.Row="1" FontSize="13" Margin="4,7" TextAlignment="Left" TextWrapping="Wrap" Foreground="White"
                                    HorizontalAlignment="Left" VerticalAlignment="Center"
                                    Text="{Binding Name}"/>
                                <Grid Grid.Row="2" Background="{StaticResource Static.Grid.Background}"
                                    Visibility="{Binding Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Margin="4,5" FontSize="18" TextAlignment="Left" TextWrapping="Wrap"
                                        HorizontalAlignment="Left" VerticalAlignment="Top"
                                        Text="{Binding Description}"/>
                                    <ProgressRing Grid.Column="0" Margin="4,5" Width="15" Height="15" BorderBrush="Gray" Foreground="Black"
                                        HorizontalAlignment="Left" VerticalAlignment="Top"
                                        IsActive="{Binding IsLoadingPrices}"/>
                                    <Button Grid.Column="1" Margin="0,5" Width="30" Height="30" Visibility="{Binding FallbackValue=Collapsed, Path=IsEnabledBuy, Converter={StaticResource visibilityConverter}}"
                                        HorizontalAlignment="Right" VerticalAlignment="Top">
                                        <Button.Content>
                                            <controls:ImageEx Stretch="Uniform" Background="{x:Null}" Source="Assets/trolley-cart@3x.png"/>
                                        </Button.Content>
                                    </Button>
                                    <Button Grid.Column="1" Margin="0,5" Width="30" Height="30" Visibility="{Binding FallbackValue=Visible, Path=IsEnabledBuy, Converter={StaticResource visibilityInverseConverter}}" IsEnabled="False"
                                        HorizontalAlignment="Right" VerticalAlignment="Top">
                                        <Button.Content>
                                            <controls:ImageEx Stretch="Uniform" Background="{x:Null}" Source="Assets/icon-empty-shopping-cart@3x.png"/>
                                        </Button.Content>
                                    </Button>
                                </Grid>
                                <Grid Grid.Row="3" Background="{StaticResource Static.Grid.Background}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0" Margin="4,2" Orientation="Horizontal"
                                            Visibility="{Binding FallbackValue=Collapsed, Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}">
                                        <Image Width="14" Height="16" Source="/Assets/packed-box@3x.png" Stretch="Uniform"/>
                                        <TextBlock FontSize="13" TextAlignment="Left" TextWrapping="Wrap"
                                            HorizontalAlignment="Left" VerticalAlignment="Center"
                                            Text="{Binding Type}"/>
                                    </StackPanel>
                                    <ProgressRing Grid.Row="0" Width="15" Height="15" BorderBrush="Gray" Foreground="Black"
                                        HorizontalAlignment="Left" VerticalAlignment="Center"
                                        IsActive="{Binding IsLoadingRemains}"/>
                                    <TextBlock Grid.Row="1" FontSize="13" Margin="4,2" TextAlignment="Left" TextWrapping="Wrap"
                                        Text="{Binding Id}"
                                        HorizontalAlignment="Left" VerticalAlignment="Center"
                                        Visibility="{Binding Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}"/>
                                </Grid>
                            </Grid>
                            <Border Grid.RowSpan="4" Background="{x:Null}" BorderBrush="#FFE2E2E2" BorderThickness="1"
                                    Visibility="{Binding Path=IsLoading, Converter={StaticResource visibilityInverseConverter}}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style>
</ResourceDictionary>
